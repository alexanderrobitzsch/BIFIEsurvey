<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Saving, Writing and Loading <code>BIFIEdata</code> Objects — save.BIFIEdata • BIFIEsurvey</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Saving, Writing and Loading <code>BIFIEdata</code> Objects — save.BIFIEdata" />

<meta property="og:description" content="These functions save (save.BIFIEdata), write (write.BIFIEdata)
or load (load.BIFIEdata) objects of class BIFIEdata.
The function load.BIFIEdata.files allows the creation
of BIFIEdata objects by loading separate files of imputed datasets,
replicate weights and a possible indicator dataset." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BIFIEsurvey</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Versions">3.4-vv</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/alexanderrobitzsch/BIFIEsurvey">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Saving, Writing and Loading <code>BIFIEdata</code> Objects</h1>
    
    <div class="hidden name"><code>save.BIFIEdata.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>These functions save (<code>save.BIFIEdata</code>), write (<code>write.BIFIEdata</code>)
or load (<code>load.BIFIEdata</code>) objects of class <code>BIFIEdata</code>.</p>
<p>The function <code>load.BIFIEdata.files</code> allows the creation
of <code>BIFIEdata</code> objects by loading separate files of imputed datasets,
replicate weights and a possible indicator dataset.</p>
    
    </div>

    <pre class="usage"><span class='fu'>save.BIFIEdata</span>(<span class='no'>BIFIEdata</span>, <span class='no'>name.BIFIEdata</span>, <span class='kw'>cdata</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>varnames</span><span class='kw'>=</span><span class='kw'>NULL</span>)

<span class='fu'>write.BIFIEdata</span>( <span class='no'>BIFIEdata</span>, <span class='no'>name.BIFIEdata</span>, <span class='kw'>dir</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/getwd'>getwd</a></span>(), <span class='kw'>varnames</span><span class='kw'>=</span><span class='kw'>NULL</span>,
    <span class='kw'>impdata.index</span><span class='kw'>=</span><span class='kw'>NULL</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"Rdata"</span>, <span class='no'>...</span> )

<span class='fu'>load.BIFIEdata</span>(<span class='no'>filename</span>, <span class='kw'>dir</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/getwd'>getwd</a></span>() )

<span class='fu'>load.BIFIEdata.files</span>( <span class='no'>files.imp</span>, <span class='no'>wgt</span>, <span class='no'>file.wgtrep</span>, <span class='kw'>file.ind</span><span class='kw'>=</span><span class='kw'>NULL</span>,
    <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"Rdata"</span>,<span class='kw'>varnames</span><span class='kw'>=</span><span class='kw'>NULL</span>, <span class='kw'>cdata</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>dir</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/getwd'>getwd</a></span>(), <span class='no'>...</span> )</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>BIFIEdata</th>
      <td><p>Object of class <code>BIFIEdata</code></p></td>
    </tr>
    <tr>
      <th>name.BIFIEdata</th>
      <td><p>Name of <code>BIFIEdata</code> set to be saved</p></td>
    </tr>
    <tr>
      <th>cdata</th>
      <td><p>An optional logical indicating whether the dataset should be
saved in a 'compact way'</p></td>
    </tr>
    <tr>
      <th>varnames</th>
      <td><p>Vector of variable names which should be saved. The default
    is to use all variables.</p></td>
    </tr>
    <tr>
      <th>dir</th>
      <td><p>Directory in which data files should be saved. The default
is the working directory.</p></td>
    </tr>
    <tr>
      <th>impdata.index</th>
      <td><p>Vector of indices for selecting imputed datasets</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>Type of saved data. Options are <code>Rdata</code> (function
    <code><a href='https://www.rdocumentation.org/packages/base/topics/save'>base::save</a></code>,
    <code>csv</code> (function <code><a href='https://www.rdocumentation.org/packages/utils/topics/write.table'>utils::write.csv</a></code>),
    <code>csv2</code> (function <code><a href='https://www.rdocumentation.org/packages/utils/topics/write.table'>utils::write.csv2</a></code>),
    <code>table</code> (function <code><a href='https://www.rdocumentation.org/packages/utils/topics/write.table'>utils::write.table</a></code>),
    <code>sav</code> (function <code><a href='https://www.rdocumentation.org/packages/foreign/topics/read.spss'>foreign::read.spss</a></code>
        for reading sav files and function
    <code><a href='https://www.rdocumentation.org/packages/sjlabelled/topics/write_spss'>sjlabelled::write_spss</a></code> for writing sav files).</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>Additional arguments to be passed to
    <code><a href='https://www.rdocumentation.org/packages/base/topics/save'>base::save</a></code>,
    <code><a href='https://www.rdocumentation.org/packages/utils/topics/write.table'>utils::write.csv</a></code>,
    <code><a href='https://www.rdocumentation.org/packages/utils/topics/write.table'>utils::write.csv2</a></code>,
    <code><a href='https://www.rdocumentation.org/packages/utils/topics/write.table'>utils::write.table</a></code>,
    <code><a href='https://www.rdocumentation.org/packages/foreign/topics/read.spss'>foreign::read.spss</a></code>,
    <code><a href='https://www.rdocumentation.org/packages/sjlabelled/topics/write_spss'>sjlabelled::write_spss</a></code></p></td>
    </tr>
    <tr>
      <th>filename</th>
      <td><p>File name of <code>BIFIEdata</code> object</p></td>
    </tr>
    <tr>
      <th>files.imp</th>
      <td><p>Vector of file names of imputed datasets</p></td>
    </tr>
    <tr>
      <th>wgt</th>
      <td><p>Variable name of case weight</p></td>
    </tr>
    <tr>
      <th>file.wgtrep</th>
      <td><p>File name for dataset with replicate weights</p></td>
    </tr>
    <tr>
      <th>file.ind</th>
      <td><p>Optional. File name for dataset with response data indicators</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Saved <span style="R">R</span> object and a summary in working directory or a loaded <span style="R">R</span> object.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>For creating objects of class <code>BIFIEdata</code> see <code><a href='BIFIE.data.html'>BIFIE.data</a></code>.</p>
<p><code><a href='https://www.rdocumentation.org/packages/base/topics/save'>base::save</a></code>, <code><a href='https://www.rdocumentation.org/packages/base/topics/load'>base::load</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"># NOT RUN {
#############################################################################
# EXAMPLE 1: Saving and loading BIFIE data objects
#############################################################################
data(data.timss1)
data(data.timssrep)

bifieobj <- BIFIEsurvey::BIFIE.data( data.list=data.timss1, wgt=data.timss1[[1]]$TOTWGT,
                 wgtrep=data.timssrep[, -1 ] )
summary(bifieobj)

# save bifieobj in a compact way
BIFIEsurvey::save.BIFIEdata( BIFIEdata=bifieobj, name.BIFIEdata="timss1_cdata" )
# save bifieobj in a non-compact way
BIFIEsurvey::save.BIFIEdata( BIFIEdata=bifieobj, name.BIFIEdata="timss1_data", cdata=FALSE)

# load this object with object name "bdat2"
bdat2 <- BIFIEsurvey::load.BIFIEdata( filename="timss1_data.Rdata" )
summary(bdat2)

# save bifieobj with selected variables
BIFIEsurvey::save.BIFIEdata( bifieobj, name.BIFIEdata="timss1_selectvars_cdata",
                     varnames=bifieobj$varnames[ c(1:7,13,12,9) ] )
# the same object, but use the non-compact way of saving
BIFIEsurvey::save.BIFIEdata( bifieobj, name.BIFIEdata="timss1_selectvars_data", cdata=FALSE,
                     varnames=bifieobj$varnames[ c(1:7,13,12,9) ] )

# load object timss1_cdata (in compact data format)
bdat3 <- BIFIEsurvey::load.BIFIEdata( filename="timss1_cdata.Rdata" )
summary(bdat3)
# save selected variables of object bdat3
BIFIEsurvey::save.BIFIEdata( bdat3, name.BIFIEdata="timss1_selectvars2_cdata",
                     varnames=bifieobj$varnames[ c(1:4,12,8) ] )

#############################################################################
# EXAMPLE 2: Writing BIFIEdata objects
#############################################################################

data(data.timss2)
data(data.timssrep)

# create compactBIFIEdata
bifieobj <- BIFIEsurvey::BIFIE.data( data.list=data.timss2, wgt=data.timss2[[1]]$TOTWGT,
                wgtrep=data.timssrep[, -1 ], cdata=TRUE)
summary(bifieobj)

# save imputed datasets in format csv2
BIFIEsurvey::write.BIFIEdata( bifieobj, name.BIFIEdata="timss2_save1", type="csv2", row.names=FALSE)

# save imputed datasets of BIFIEdata object in format table without column names
# and code missings as "."
BIFIEsurvey::write.BIFIEdata( bifieobj, name.BIFIEdata="timss2_save2", type="table",
                  col.names=FALSE, row.names=FALSE, na="." )

# save imputed datasets of  BIFIEdata object in format csv and select some variables
# and only the first three datasets
varnames <- c("IDSTUD","TOTWGT","female","books","lang","ASMMAT")
BIFIEsurvey::write.BIFIEdata( bifieobj, name.BIFIEdata="timss2_save3", type="csv",
                   impdata.index=1:3, varnames=varnames)

# save imputed datasets of BIFIEdata object in format Rdata, the R binary format
BIFIEsurvey::write.BIFIEdata( bifieobj, name.BIFIEdata="timss2_save4", type="Rdata"  )

# save imputed datasets in sav (SPSS) format
BIFIEsurvey::write.BIFIEdata( bifieobj, name.BIFIEdata="timss2_save5", type="sav" )

#############################################################################
# EXAMPLE 3: Loading BIFIEdata objects saved in separate files
#                   (no indicator dataset)
#############################################################################

# We assume that Example 2 is applied and we build on the saved files
# from this example.

#***--- read Rdata format
# extract files with imputed datasets and replicate weights
files.imp <- miceadds::grep.vec( c("timss2_save4__IMP", ".Rdata" ),
            list.files(getwd())  )$x
file.wgtrep <- miceadds::grep.vec( c("timss2_save4__WGTREP", ".Rdata" ),
            list.files(getwd())  )$x
# select some variables in varnames
varnames <- scan( nlines=1, what="character")
   IDSTUD   TOTWGT books lang migrant likesc  ASMMAT

# load files and create BIFIEdata object
bifieobj1 <- BIFIEsurvey::load.BIFIEdata.files( files.imp, wgt="TOTWGT", file.wgtrep,
                        type="Rdata", varnames=varnames )
summary(bifieobj1)

#***--- read csv2 format
files.imp <- miceadds::grep.vec( c("timss2_save1__IMP", ".csv" ),
                        list.files(getwd()) )$x
file.wgtrep <- miceadds::grep.vec( c("timss2_save1__WGTREP", ".csv" ),
                        list.files(getwd()) )$x
bifieobj2 <- BIFIEsurvey::load.BIFIEdata.files( files.imp, wgt="TOTWGT",
                    file.wgtrep, type="csv2" )
summary(bifieobj2)

#***--- read sav format
files.imp <- miceadds::grep.vec( c("timss2_save5__IMP", ".sav" ),
                        list.files(getwd()) )$x
file.wgtrep <- miceadds::grep.vec( c("timss2_save5__WGTREP", ".sav" ),
                        list.files(getwd()) )$x
bifieobj3 <- BIFIEsurvey::load.BIFIEdata.files( files.imp, wgt="TOTWGT",
                file.wgtrep, type="sav", to.data.frame=TRUE, use.value.labels=FALSE)
summary(bifieobj3)

#############################################################################
# EXAMPLE 4: Loading BIFIEdata objects saved in separate files
#                   (with an indicator dataset)
#############################################################################

data(data.timss1)
data(data.timss1.ind)
data(data.timssrep)

# create BIFIEdata object at first
bifieobj <- BIFIEsurvey::BIFIE.data( data.list=data.timss1, wgt="TOTWGT",
            wgtrep=data.timssrep[, -1 ] )
summary(bifieobj)

#--- save datasets for the purpose of the following example
write.BIFIEdata( BIFIEdata=bifieobj, name.BIFIEdata="timss1_ex", type="Rdata" )
# save indicator dataset
save( data.timss1.ind, file="timss1_ex__IND.Rdata" )

# grep file names
files.imp <- miceadds::grep.vec( c("timss1_ex__IMP", ".Rdata" ),
                      list.files(getwd()) )$x
file.wgtrep <- miceadds::grep.vec( c("timss1_ex__WGTREP", ".Rdata" ),
                      list.files(getwd()) )$x
file.ind <- miceadds::grep.vec( c("timss1_ex__IND", ".Rdata" ),
                      list.files(getwd()) )$x
# define variables for selection
varnames <- c("IDSTUD","TOTWGT","female","books","lang","ASMMAT")
# read files using indicator dataset
bifieobj2 <- BIFIEsurvey::load.BIFIEdata.files( files.imp, wgt="TOTWGT",
                  file.wgtrep=file.wgtrep, file.ind=file.ind, type="Rdata",
                  varnames=varnames)
summary(bifieobj2)

# read files without indicator dataset
bifieobj3 <- BIFIEsurvey::load.BIFIEdata.files( files.imp, wgt="TOTWGT",
                file.wgtrep=file.wgtrep, type="Rdata", varnames=varnames)
summary(bifieobj3)

# compare some descriptive statistics
res2 <- BIFIEsurvey::BIFIE.univar( bifieobj2, vars=c("books", "ASMMAT", "lang") )
res3 <- BIFIEsurvey::BIFIE.univar( bifieobj3, vars=c("books", "ASMMAT", "lang") )
summary(res2)
summary(res3)
# }
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Alexander Robitzsch.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

